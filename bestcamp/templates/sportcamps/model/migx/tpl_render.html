{switch $config}{case 'dbr_ObjectServices'}{switch $field}{case 'evaluation_migxrender'}
{set $dbdataarray = $service_id | dbdataarray : 'cmpServiceEvaluation' : 'service_id'}{if $dbdataarray | iterable}{set $evaluations = []}{if $evaluation_migx}{foreach $evaluation_migx | fromJSON as $item }{set $evaluations[$item.evaluation_id] = $item}{/foreach}{/if}{if $.post.configs == 'dbr_SportCamps'}{set $sport_id = $.post.object_id | dbdata : 'cmpSportCamps' : 'sport_id'}
{set $objectSportArry = $.post.resource_id | dbdataarray : 'cmpObjectSport' : 'resource_id'}
{set $evaluationsSport = []}{foreach $objectSportArry as $item }{if $item.sport_id != $sport_id}{continue}{/if}{if $item.service_migx | iterable}{foreach $item.service_migx as $service_migx }{if $service_migx.active != 1}{continue}{/if}{if $service_migx.service_id != $service_id}{continue}{/if}{foreach $service_migx.evaluation_migx | fromJSON as $evaluation_migx }{if $evaluation_migx.active != 1}{continue}{/if}{set $evaluationsSport[$evaluation_migx.evaluation_id] = $evaluation_migx}{/foreach}{/foreach}{/if}{/foreach}{/if}<table>{foreach $dbdataarray as $item }{if ($item.evaluation_id == $evaluations[$item.evaluation_id].evaluation_id) && !$evaluations[$item.evaluation_id].active}{continue}{/if}{if $.post.configs == 'dbr_SportCamps' && $evaluationsSport | length}{if !($item.evaluation_id | in : $evaluationsSport)}{continue}{/if}{/if}{if $.post.items}{if !($item.evaluation_id | in : $evaluations)}{continue}{/if}{/if}{set $price_new = $evaluations[$item.evaluation_id].price_new}{if $evaluations[$item.evaluation_id].price_new === ''}{set $price_new = ' - '}{/if}<tr><td style="vertical-align:text-bottom">{$item.evaluation_id | dbdata : 'cmpEvaluation' : 'title_en' : 'dbr_ObjectServices-evaluation_migxrender'} —</td><td style="vertical-align:text-bottom">{$item.price}</td><td style="color:green;vertical-align:text-bottom">/<strong>{$price_new}</strong></td></tr>{/foreach}</table>{/if}{/switch}{case 'in_inventoriesPrice'}{switch $field}{case 'evaluation_migxrender'}{if $evaluation_migx}<table>{foreach $evaluation_migx | fromJSON as $item }{if $item.active != 1}{continue}{/if}<tr><td style="vertical-align:text-bottom">{$item.evaluation} —</td><td style="vertical-align:text-bottom">{$item.price}</td></tr>{/foreach}</table>{/if}{/switch}{case 'dbr_ObjSportInfra'}{switch $field}{case 'title_enrender'}{if $infrastr_id}{$title_en ?: ($infrastr_id | dbdata : 'cmpSportInfrastr' : 'title_en' : 'dbr_ObjectServices-title_enrender')}{/if}{case 'covering_idrender'}{if $covering_id || $marking_id}{if $covering_id}<p><strong>Surface:</strong></p><p>{$covering_id | dbdata : 'cmpSportCoverings' : 'title_en' : 'dbr_ObjectServices-covering_idrender'}</p>{/if}{if $marking_id}<p><strong>Marking:</strong></p><p>{$marking_id | dbdata : 'cmpSportMarking' : 'title_en' : 'dbr_ObjectServices-covering_idrender'}</p>{/if}{/if}{/switch}{case 'dbr_ObjectSport'}{switch $field}{case 'infraobj_idsrender'}{foreach $infraobj_ids | fromJSON as $item }<p>{$item | dbdata : 'cmpObjSportInfra' : 'title_en' : 'dbr_ObjectSport-infraobj_idsrender'}</p>{/foreach}{case 'service_idsrender'}
{insert "file:sportcamps/model/migx/service_idsrender.tpl"}{foreach $sport_service as $item }{if ($services[$item.service_id] | iterable) && $services[$item.service_id].active != 1}{continue}{/if}<p>{$item.service_id | dbdata : 'cmpObjServices' : 'title_en' : 'dbr_ObjectSport-infraobj_idsrender'}</p>{/foreach}{/switch}{case 'in_inventories'}{switch $field}{case 'evaluation_idsrender'}{if $evaluation_ids}<table>{foreach $evaluation_ids | split as $item }<tr><td style="vertical-align:text-bottom">{$item | dbdata : 'cmpEvaluation' : 'title_en' : 'in_inventories-evaluation_idsrender'}</td></tr>{/foreach}</table>{/if}{/switch}{case 'dbr_InfraHabit'}{switch $field}{case 'imagesrender'}{if $images}<table><tr>{foreach $images | fromJSON as $item }{if $item.active != 1}{continue}{/if}<td style="vertical-align:text-bottom"><img src="{$item.img}" width="75" alt="alt"/></td>{/foreach}</tr></table>{/if}{/switch}{case 'dbr_SportCamps'}{switch $field}{case 'rating_idrender'}
{set $ratingarr = $rating_id | dbdataarray : 'MsfmStorageMember' : 'key'}{foreach $ratingarr as $item }{if $item.storage_id != 2}{continue}{/if}{$item.name}{/foreach}{case 'status_idrender'}
{set $statusarr = $status_id | dbdataarray : 'MsfmStorageMember' : 'key'}{foreach $statusarr as $item }{if $item.storage_id != 1}{continue}{/if}{$item.name}{/foreach}{case 'renderico'}
{set $ico = $sport_id | dbdata : 'cmpSports' : 'ico' : 'tpl_render-dbr_SportCamps-renderico'}{if $ico}<img src="/myserv/assets/images/{$ico}" width="75" alt="alt"/>{/if}{case 'prevrender'}
{set $uri = $properties | fromJSON}<a href="/{$uri.alias}" target="_blank"><img src="/myserv/assets/images/ico/external-link.svg" width="16" height="16" alt="alt"/></a>{/switch}{/switch}